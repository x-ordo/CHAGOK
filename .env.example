# ==============================================================================
# Legal Evidence Hub (LEH) - Environment Variables Template
# ==============================================================================
#
# This is a REFERENCE TEMPLATE. Each service has its own .env file:
#   - backend/.env        → FastAPI backend settings
#   - frontend/.env       → Next.js frontend settings
#   - ai_worker/.env      → Lambda AI worker settings
#
# Copy this file to the appropriate service directory and customize.
# NEVER commit .env files with real credentials to Git.
#
# ==============================================================================


# ==============================================================================
# BACKEND (FastAPI) - backend/.env
# ==============================================================================

# ── Application ──
APP_NAME=legal-evidence-hub
APP_ENV=local                           # local | dev | prod
APP_DEBUG=true                          # false in production
BACKEND_HOST=0.0.0.0
BACKEND_PORT=8000
BACKEND_LOG_LEVEL=INFO                  # DEBUG | INFO | WARNING | ERROR

# ── CORS ──
CORS_ALLOW_ORIGINS=http://localhost:3000,https://your-domain.com

# ── Authentication ──
JWT_SECRET=CHANGE_ME_MIN_32_CHARS_RANDOM_STRING
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=60

# ── Admin Account ──
ADMIN_DEFAULT_EMAIL=admin@example.com
ADMIN_DEFAULT_PASSWORD=CHANGE_ME_STRONG_PASSWORD

# ── Database ──
# SQLite for local development
DATABASE_URL=sqlite:///./leh_local.db

# PostgreSQL for production
# DATABASE_URL=postgresql+psycopg2://user:password@host:5432/leh_db

# ── AWS Services ──
AWS_REGION=ap-northeast-2
AWS_ACCESS_KEY_ID=YOUR_AWS_ACCESS_KEY_ID
AWS_SECRET_ACCESS_KEY=YOUR_AWS_SECRET_ACCESS_KEY

# S3 Evidence Storage
S3_EVIDENCE_BUCKET=leh-evidence-prod
S3_EVIDENCE_PREFIX=cases/
S3_PRESIGNED_URL_EXPIRE_SECONDS=3600

# DynamoDB Evidence Metadata
DDB_EVIDENCE_TABLE=leh_evidence_prod
DDB_CASE_SUMMARY_TABLE=leh_case_summary_prod

# ── Qdrant Vector DB ──
QDRANT_HOST=http://localhost:6333
QDRANT_API_KEY=
QDRANT_CASE_INDEX_PREFIX=case_rag_
QDRANT_DEFAULT_TOP_K=5

# ── OpenAI ──
OPENAI_API_KEY=sk-your-openai-api-key
OPENAI_API_BASE=https://api.openai.com/v1
OPENAI_MODEL_CHAT=gpt-4o-mini
OPENAI_MODEL_EMBEDDING=text-embedding-3-small
LLM_REQUEST_TIMEOUT_SECONDS=60

# ── Feature Flags ──
FEATURE_DRAFT_PREVIEW_ONLY=true
FEATURE_ENABLE_RAG_SEARCH=true
FEATURE_ENABLE_TIMELINE_VIEW=true
FEATURE_ENABLE_EXPORT_DOCX=true

# ── Logging ──
LOG_FORMAT=json                         # text for local, json for prod
LOG_LEVEL=INFO
SENTRY_DSN=


# ==============================================================================
# FRONTEND (Next.js) - frontend/.env
# ==============================================================================
# Note: Client-side variables MUST start with NEXT_PUBLIC_

NEXT_PUBLIC_API_BASE_URL=http://localhost:8000
NEXT_PUBLIC_APP_ENV=local               # local | dev | production
NEXT_PUBLIC_SITE_URL=http://localhost:3000

# Feature Flags
NEXT_PUBLIC_FEATURE_DRAFT_PREVIEW_ONLY=true
NEXT_PUBLIC_FEATURE_ENABLE_RAG_SEARCH=true
NEXT_PUBLIC_FEATURE_ENABLE_TIMELINE_VIEW=true
NEXT_PUBLIC_FEATURE_ENABLE_EXPORT_DOCX=true

# Analytics (Optional)
# NEXT_PUBLIC_SENTRY_DSN=https://xxx@sentry.io/xxx
# NEXT_PUBLIC_GA_MEASUREMENT_ID=G-XXXXXXXXXX


# ==============================================================================
# AI WORKER (Lambda) - ai_worker/.env
# ==============================================================================

ENVIRONMENT=dev                         # dev | staging | prod
LOG_LEVEL=INFO

# AWS
AWS_REGION=ap-northeast-2
S3_EVIDENCE_BUCKET=leh-evidence-prod
S3_DOWNLOAD_TMP_PATH=/tmp
DYNAMODB_TABLE=leh_evidence_prod
DYNAMODB_TABLE_CASE_SUMMARY=leh_case_summary_prod

# Qdrant
QDRANT_HOST=localhost
QDRANT_PORT=6333
QDRANT_API_KEY=
QDRANT_COLLECTION_PREFIX=case_rag_

# OpenAI
OPENAI_API_KEY=sk-your-openai-api-key
OPENAI_GPT_MODEL=gpt-4o-mini
OPENAI_WHISPER_MODEL=whisper-1
OPENAI_VISION_MODEL=gpt-4o-mini
OPENAI_EMBEDDING_MODEL=text-embedding-3-small

# Parser Settings
MAX_FILE_SIZE_MB=100
ENABLE_IMAGE_VISION=true
ENABLE_IMAGE_OCR=false

# Analysis Settings
ENABLE_ARTICLE_840_TAGGING=true
ENABLE_EVIDENCE_SUMMARIZATION=true
ENABLE_RISK_ANALYSIS=false

# Vector Store
VECTOR_DIMENSION=1536
SIMILARITY_THRESHOLD=0.7


# ==============================================================================
# CI/CD (GitHub Secrets) - NOT in .env files
# ==============================================================================
# These are set in GitHub repository settings > Secrets:
#
# AWS_ROLE_ARN              - IAM Role ARN for OIDC authentication
# S3_FRONTEND_BUCKET        - S3 bucket for frontend static hosting
# CLOUDFRONT_DISTRIBUTION_ID - CloudFront distribution ID
# BACKEND_API_URL           - Production backend API URL


# ==============================================================================
# Legal Notices
# ==============================================================================
LEGAL_NOTICE_URL=https://leh.example.com/legal-notice
PRIVACY_POLICY_URL=https://leh.example.com/privacy
TERMS_OF_SERVICE_URL=https://leh.example.com/terms
AI_OUTPUT_DISCLAIMER="AI가 생성한 문서는 초안이며, 반드시 법률 전문가의 검토가 필요합니다."
