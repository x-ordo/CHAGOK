# ============================================
# Legal Evidence Hub (LEH) – .env.example
# ============================================
# 운영환경: Oracle Cloud VM + AWS (RDS / S3 / DynamoDB / OpenSearch)
# 백엔드(FastAPI), AI Worker, 프론트엔드(Vite)에서 공통으로 사용됨.
#
# 실제 서비스 환경에서는 이 파일을 복사해 .env 를 만들고
# 모든 민감 정보(AWS 키, DB 비밀번호)는 직접 채워 넣을 것.
#
# 절대 Git 저장소에 .env 파일을 올리지 말 것.
# ============================================


# ────────────────────────────────────────────
# 0. 공통 환경 설정
# ────────────────────────────────────────────
APP_NAME=legal-evidence-hub
APP_ENV=prod                  # local | dev | prod
APP_DEBUG=false               # 프로덕션에서는 false

# 백엔드 URL (프론트·워커에서 API 호출 시 사용)
BACKEND_BASE_URL=http://<ORACLE_PUBLIC_IP>:8000


# ────────────────────────────────────────────
# 1. FastAPI 백엔드 설정
# ────────────────────────────────────────────
BACKEND_HOST=0.0.0.0
BACKEND_PORT=8000
BACKEND_LOG_LEVEL=INFO        # DEBUG | INFO | WARNING | ERROR

# CORS
# Vercel/Netlify/Custom Domain 등 FE URL을 넣으면 됨
CORS_ALLOW_ORIGINS=https://leh.example.com


## 1.1 Authentication / JWT
JWT_SECRET=CHANGE_ME_IN_PROD
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=60


## 1.2 Admin
ADMIN_DEFAULT_EMAIL=admin@example.com
ADMIN_DEFAULT_PASSWORD=CHANGE_ME_1234


# ────────────────────────────────────────────
# 2. PostgreSQL (AWS RDS)
# ────────────────────────────────────────────
POSTGRES_HOST=<your-rds-endpoint>.rds.amazonaws.com
POSTGRES_PORT=5432
POSTGRES_USER=leh_user
POSTGRES_PASSWORD=SUPER_SECRET_PASSWORD
POSTGRES_DB=leh_db

# SQLAlchemy 연결 문자열 (백엔드에서 사용)
DATABASE_URL=postgresql+psycopg2://leh_user:SUPER_SECRET_PASSWORD@<your-rds-endpoint>.rds.amazonaws.com:5432/leh_db


# ────────────────────────────────────────────
# 3. AWS 공통 설정
# ────────────────────────────────────────────
AWS_REGION=ap-northeast-2
AWS_ACCESS_KEY_ID=YOUR_AWS_ACCESS_KEY_ID
AWS_SECRET_ACCESS_KEY=YOUR_AWS_SECRET_ACCESS_KEY
AWS_SESSION_TOKEN=    # STS/임시키 사용 시 채움


# ────────────────────────────────────────────
# 4. S3 – 증거 원본 파일 저장소
# ────────────────────────────────────────────
# 예시: s3://leh-evidence-prod/cases/{case_id}/...
S3_EVIDENCE_BUCKET=leh-evidence-prod
S3_EVIDENCE_PREFIX=cases/       
S3_PRESIGNED_URL_EXPIRE_SECONDS=3600


# ────────────────────────────────────────────
# 5. DynamoDB – 증거 메타데이터 & 요약 저장
# ────────────────────────────────────────────
DDB_EVIDENCE_TABLE=leh_evidence_prod
DDB_CASE_SUMMARY_TABLE=leh_case_summary_prod


# ────────────────────────────────────────────
# 6. OpenSearch – 사건별 RAG 임베딩 인덱스
# ────────────────────────────────────────────
OPENSEARCH_HOST=https://search-leh-prod-CHANGE_ME.ap-northeast-2.es.amazonaws.com
OPENSEARCH_USERNAME=leh_opensearch_user
OPENSEARCH_PASSWORD=CHANGE_ME
OPENSEARCH_CASE_INDEX_PREFIX=case_rag_
OPENSEARCH_DEFAULT_TOP_K=5


# ────────────────────────────────────────────
# 7. OpenAI / LLM 설정
# ────────────────────────────────────────────
OPENAI_API_KEY=YOUR_OPENAI_API_KEY
OPENAI_API_BASE=https://api.openai.com/v1

# LLM 모델
OPENAI_MODEL_CHAT=gpt-4.1-mini
OPENAI_MODEL_EMBEDDING=text-embedding-3-small
OPENAI_MODEL_STT=gpt-4o-mini-transcribe
OPENAI_MODEL_VISION=gpt-4.1-mini

LLM_REQUEST_TIMEOUT_SECONDS=60


# ────────────────────────────────────────────
# 8. AI Worker 설정
# ────────────────────────────────────────────
WORKER_ENV=prod
WORKER_MAX_CONCURRENT_TASKS=10

WORKER_ENABLE_STT=true
WORKER_ENABLE_OCR=true
WORKER_ENABLE_TALK_PARSING=true


# ────────────────────────────────────────────
# 9. Frontend (Vite / React)
# ────────────────────────────────────────────
VITE_APP_ENV=prod
VITE_API_BASE_URL=https://leh.example.com/api
VITE_RAG_SEARCH_ENABLED=true
VITE_DRAFT_PREVIEW_ONLY=true


# ────────────────────────────────────────────
# 10. Logging / Monitoring
# ────────────────────────────────────────────
SENTRY_DSN=
LOG_FORMAT=json
LOG_LEVEL=INFO


# ────────────────────────────────────────────
# 11. 기능 플래그
# ────────────────────────────────────────────
FEATURE_DRAFT_PREVIEW_ONLY=true
FEATURE_ENABLE_RAG_SEARCH=true
FEATURE_ENABLE_TIMELINE_VIEW=true
FEATURE_ENABLE_EXPORT_DOCX=true


# ────────────────────────────────────────────
# 12. 법률 고지/정책 링크
# ────────────────────────────────────────────
LEGAL_NOTICE_URL=https://leh.example.com/legal-notice
PRIVACY_POLICY_URL=https://leh.example.com/privacy
TERMS_OF_SERVICE_URL=https://leh.example.com/terms
AI_OUTPUT_DISCLAIMER="생성된 문서는 AI 초안이며, 법률 전문가의 최종 검토가 필요합니다."
